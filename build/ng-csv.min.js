/*! ngcsv 24-03-2014 */
!function(){angular.module("ngCsv.config",[]).value("ngCsv.config",{debug:!0}).config(["$compileProvider",function(a){angular.isDefined(a.urlSanitizationWhitelist)?a.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/):a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]),angular.module("ngCsv.directives",[]),angular.module("ngCsv",["ngCsv.config","ngCsv.directives","ngSanitize"]),angular.module("ngCsv.directives",[]).directive("ngCsv",["$parse",function(){return{restrict:"AC",replace:!0,transclude:!0,scope:{data:"&ngCsv",filename:"@filename",header:"&csvHeader",txtDelim:"@textDelimiter",fieldSep:"@fieldSeparator",ngClick:"&"},controller:["$scope","$element","$attrs","$transclude",function(a){var b=function(b){return"string"==typeof b?(b=b.replace(/"/g,'""'),a.txtDelim&&(b=a.txtDelim+b+a.txtDelim),b):"boolean"==typeof b?b?"TRUE":"FALSE":b};a.csv="",a.$watch(function(){a.buildCsv()},!0),a.buildCsv=function(){var c=a.data(),d="data:text/csv;charset=utf-8,",e=a.header();if(e){var f=[];angular.forEach(e,function(a){this.push(a)},f);var g=f.join(a.fieldSep||",");d+=g+"\r\n"}return angular.forEach(c,function(e,f){var g=[];angular.forEach(e,function(a){this.push(b(a))},g),dataString=g.join(a.fieldSep||","),d+=f<c.length?dataString+"\r\n":dataString}),a.csv=encodeURI(d),a.csv},a.getFilename=function(){return a.filename||"download.csv"}}],template:'<div class="csv-wrap"><div class="element" ng-transclude></div><a class="hidden-link" ng-hide="true" ng-href="{{ csv }}" download="{{ getFilename() }}"></a></div>',link:function(a,b){var c=angular.element(b.children()[0]),d=angular.element(b.children()[1]);c.bind("click",function(){d[0].click(),a.ngClick&&a.ngClick()})}}}])}(window,document);